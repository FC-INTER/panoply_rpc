/*
 * This is sample code generated by rpcgen.
 * These are only templates and you can use them
 * as a guideline for developing your own functions.
 */

#include "panoply.h"

panoply *
init_1_svc(panoply *argp, struct svc_req *rqstp)
{
	static panoply  result;

	/*
	 * insert server code here
	 */

	return &result;
}

compte *
create_account_1_svc(void *argp, struct svc_req *rqstp)
{
	static compte  result;

	/*
	 * insert server code here
	 */

	return &result;
}

int *
log_in_1_svc(identifiants *argp, struct svc_req *rqstp)
{
	static int  result;

	/*
	 * insert server code here
	 */

	return &result;
}

int *
list_all_collection_1_svc(list_collection *argp, struct svc_req *rqstp)
{
	static int  result;

	/*
	 * insert server code here
	 */

	return &result;
}

int *
list_all_collection_clothes_1_svc(list_collection *argp, struct svc_req *rqstp)
{
	static int  result;

	/*
	 * insert server code here
	 */

	return &result;
}

list_collection *
add_cloth_to_collection_1_svc(list_collection *argp, struct svc_req *rqstp)
{
	static list_collection  result;

	/*
	 * insert server code here
	 */

	return &result;
}

list_collection *
remove_cloth_to_collection_1_svc(list_collection *argp, struct svc_req *rqstp)
{
	static list_collection  result;

	/*
	 * insert server code here
	 */

	return &result;
}

int *
list_type_abo_1_svc(list_abonnement *argp, struct svc_req *rqstp)
{
	static int  result;

	/*
	 * insert server code here
	 */

	return &result;
}

compte *
affecter_abo_client_1_svc(compte *argp, struct svc_req *rqstp)
{
	static compte  result;

	/*
	 * insert server code here
	 */

	return &result;
}

compte *
modif_abo_1_svc(compte *argp, struct svc_req *rqstp)
{
	static compte  result;

	/*
	 * insert server code here
	 */

	return &result;
}

list_abonnement *
add_subscription_1_svc(list_abonnement *argp, struct svc_req *rqstp)
{
	static list_abonnement  result;

	/*
	 * insert server code here
	 */

	return &result;
}

int *
display_abonnement_1_svc(abonnement *argp, struct svc_req *rqstp)
{
	static int  result;

	/*
	 * insert server code here
	 */

	return &result;
}

article_list *
add_article_1_svc(article_list *argp, struct svc_req *rqstp)
{
	static article_list  result;

	/*
	 * insert server code here
	 */

	return &result;
}

article_list *
update_article_1_svc(article_list *argp, struct svc_req *rqstp)
{
	static article_list  result;

	/*
	 * insert server code here
	 */

	return &result;
}

article_list *
delete_article_1_svc(article_list *argp, struct svc_req *rqstp)
{
	static article_list  result;

	/*
	 * insert server code here
	 */

	return &result;
}

int *
fetch_article_1_svc(article_list *argp, struct svc_req *rqstp)
{
	static int  result;

	/*
	 * insert server code here
	 */

	return &result;
}

int *
list_all_brand_1_svc(list_brand *argp, struct svc_req *rqstp)
{
	static int  result;

	/*
	 * insert server code here
	 */

	return &result;
}

list_brand *
add_brand_1_svc(list_brand *argp, struct svc_req *rqstp)
{
	static list_brand  result;

	/*
	 * insert server code here
	 */

	return &result;
}

list_brand *
delete_brand_1_svc(list_brand *argp, struct svc_req *rqstp)
{
	static list_brand  result;

	/*
	 * insert server code here
	 */

	return &result;
}

list_brand *
update_brand_1_svc(list_brand *argp, struct svc_req *rqstp)
{
	static list_brand  result;

	/*
	 * insert server code here
	 */

	return &result;
}

void *
list_all_cart_1_svc(cart *argp, struct svc_req *rqstp)
{
	static char * result;

	int i;

	printf("Vos articles dans votre panier : \n");
	for(i=0;i<argp->nbArticle-1;i++){
		printf("	%d - %s \n",i,argp->list_article[i].nom);
	}

	return (void *) &result;
}

panoply * add_to_cart_1_svc(panoply *argp, struct svc_req *rqstp)
{
	static panoply  result;
	int i,indice,id;
	char term;

	printf("Quel est votre identifiant ?\n");
	scanf("%d",&id);

	printf("Liste de tous les articles\n");
	for (i=0;argp->articles.nb_different_article;i++){
		printf("	%d - %s\n",i,argp->articles.article[i].nom);
	}

	do{
		printf("Entrez l'indice de l'article à ajouter\n");
		scanf("%d%c",&indice,&term);
	}while(term!='\n');

	printf("Ajout au panier ...");

	int nb_article; 
	struct article article_added;

	argp->commandes.listCommande[id].nbArticle++;
	nb_article=argp->commandes.listCommande[id].nbArticle;
	article_added=argp->articles.article[indice];
	argp->commandes.listCommande[id].list_article[nb_article]=article_added;

	printf("Panier mis à jour");
	
	result=*argp;
	return &result;
}

panoply *
rent_1_svc(panoply *argp, struct svc_req *rqstp)
{
	static panoply  result;

	char confirmation;
	char payement;
	int id,nb_article,i,indice_article,stock;
	struct article passage;


	printf("---------------------------------------------------\n");
	printf("Quel est votre identifiant ?\n");
	scanf("%d",&id);
	printf("Etes vous sur de vouloir louer ce(s) vêtement ? (y/n)\n");
	scanf("%s",&confirmation);
	if (confirmation == 'y'){
		printf("Prix en euro : %d\n",argp->commandes.listCommande[id].list_article[id].prix_location);
		printf("Prix jeton : %d\n",argp->commandes.listCommande[id].list_article[id].prix_location);
		printf("Voulez vous payer en jeton ou en euros ? (j/e)\n");
		scanf("%s",&payement);
		if(payement == 'j'){
			argp->comptes.cmpt[id].nb_credit--;
			printf("Payement effectué\n");
			nb_article=argp->commandes.listCommande[id].nbArticle;
			printf("Mise à jour des stock\n");
			for (i = 0 ; i<nb_article ; i++ ){

				indice_article=argp->commandes.listCommande[id].list_article[i].id_article;
				stock=argp->commandes.listCommande[id].list_article[i].stock;
				printf("	article : %s | indice : %d |stock : %d\n",argp->commandes.listCommande[id].list_article[i].nom,indice_article,stock);
				stock = argp->articles.article[indice_article-1].stock;
				stock--;
				printf("	article : %s | indice : %d |stock : %d\n",argp->articles.article[indice_article-1].nom,indice_article-1,stock);

			}
			printf("\n");
			printf("Suppression du panier\n");
			for (int i =id; argp->commandes.listCommande[id].nbArticle-2; i++){
				passage=argp->commandes.listCommande[id].list_article[i];
				argp->commandes.listCommande[id].list_article[i]=argp->commandes.listCommande[id].list_article[i+1];
				argp->commandes.listCommande[id].list_article[i+1]=passage;		
			}	
			argp->commandes.listCommande[id].nbArticle--;
			printf("Panier supprime\n");
		}
		else if (payement == 'e'){
			printf("Payement effectué, votre moula est partie\n");
			nb_article=argp->commandes.listCommande[id].nbArticle;
			printf("Mise à jour des stock\n");
			for (i = 0 ; i<nb_article ; i++ ){

				indice_article=argp->commandes.listCommande[id].list_article[i].id_article;
				stock=argp->commandes.listCommande[id].list_article[i].stock;
				printf("	article : %s | indice : %d |stock : %d\n",argp->commandes.listCommande[id].list_article[i].nom,indice_article,stock);
				stock = argp->articles.article[indice_article-1].stock;
				stock--;
				printf("	article : %s | indice : %d |stock : %d\n",argp->articles.article[indice_article-1].nom,indice_article-1,stock);

			}
			printf("\n");
			printf("Suppression du panier\n");
			for (int i =id; argp->commandes.listCommande[id].nbArticle-2; i++){
				passage=argp->commandes.listCommande[id].list_article[i];
				argp->commandes.listCommande[id].list_article[i]=argp->commandes.listCommande[id].list_article[i+1];
				argp->commandes.listCommande[id].list_article[i+1]=passage;		
			}	
			argp->commandes.listCommande[id].nbArticle--;
			printf("Panier supprime\n");
		}
		else{
			printf("vous ne savez pas taper sur votre ordi èé");
		}
	}
	else  if (confirmation == 'n') {
		printf("Vous avez renoncé à la location");
	}
	else{
		printf("vous ne savez pas taper sur votre ordi èé");
	}
	
	printf("---------------------------------------------------\n");

	result=*argp;
	return &result;
}

cart *
remove_from_cart_1_svc(cart *argp, struct svc_req *rqstp)
{
	static cart  result;
	int indice;
	struct article passage;


	printf("---------------------------------------------------\n");
	list_all_cart_1_svc(argp,rqstp);
	printf("Indiquez l'indice de l'article à supprimer : \n");
	scanf("%d",&indice);
	for (int i =indice; argp->nbArticle-2; i++){
		passage=argp->list_article[i];
		argp->list_article[i]=argp->list_article[i+1];
		argp->list_article[i+1]=passage;		
	}	
	argp->nbArticle--;
	printf("Article supprimé\n");
	printf("---------------------------------------------------\n");
	result=*argp;

	return &result;
}
